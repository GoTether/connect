<!-- ... (header and style unchanged, except for improved field-list vertical layout and new .edit-field-btn style) ... -->
<style>
  /* ...existing styles... */
  .field-list { margin-top: 0.8em; margin-bottom: 0.8em; display: flex; flex-direction: column; gap: 1em;} /* <-- Vertical list! */
  /* Add style for edit field button */
  .edit-field-btn {
    background: #f39c12;
    color: #fff;
    border: none;
    border-radius: 6px;
    padding: 0.4em 1em;
    font-size: 0.95em;
    cursor: pointer;
    margin-left: 0.6em;
    margin-top: 0.3em;
  }
  .edit-field-btn:hover { background: #c87c09; }
</style>
<!-- ... (body unchanged up to script section) ... -->
<script>
/* ...existing JS up to function renderFieldsList... */

// Show Field Edit Form (inline under field)
function showEditFieldForm(sectionIdx, fieldIdx) {
  // Remove any previous field form in this section
  if (addingFieldToSectionIdx !== null) {
    document.getElementById(`field-form-wrap-${addingFieldToSectionIdx}`).innerHTML = '';
    addingFieldToSectionIdx = null;
  }
  const wrap = document.getElementById(`field-form-wrap-${sectionIdx}`);
  const field = sections[sectionIdx].fields[fieldIdx];
  let isStatic = field.static;
  let isRequired = field.required;
  wrap.innerHTML = `
    <form id="edit-field-form-${sectionIdx}-${fieldIdx}" class="inline-field-form" autocomplete="off">
      <input type="text" id="edit-field-name-${sectionIdx}-${fieldIdx}" required value="${field.name}" placeholder="Field Name">
      <select id="edit-field-type-${sectionIdx}-${fieldIdx}">
        <option value="text"${field.type === "text" ? " selected" : ""}>Text</option>
        <option value="textarea"${field.type === "textarea" ? " selected" : ""}>Text Area</option>
        <option value="number"${field.type === "number" ? " selected" : ""}>Number</option>
        <option value="dropdown"${field.type === "dropdown" ? " selected" : ""}>Dropdown</option>
        <option value="radio"${field.type === "radio" ? " selected" : ""}>Radio Buttons</option>
        <option value="checkbox"${field.type === "checkbox" ? " selected" : ""}>Checkbox</option>
        <option value="image"${field.type === "image" ? " selected" : ""}>Image Upload</option>
      </select>
      <input type="text" id="edit-field-help-${sectionIdx}-${fieldIdx}" value="${field.help || ""}" placeholder="Help text (optional)">
      <div id="edit-options-wrap-${sectionIdx}-${fieldIdx}" style="display:none;">
        <input type="text" id="edit-field-options-${sectionIdx}-${fieldIdx}" value="${field.options ? field.options.join(", ") : ""}" placeholder="Options (comma separated)">
      </div>
      <div style="margin-bottom:1em;">
        <button type="button" id="edit-static-toggle-${sectionIdx}-${fieldIdx}" class="toggle-btn">Static: ${isStatic ? "Yes" : "No"}</button>
        <button type="button" id="edit-required-toggle-${sectionIdx}-${fieldIdx}" class="toggle-btn">Required: ${isRequired ? "Yes" : "No"}</button>
      </div>
      <button type="submit">Save</button>
      <button type="button" id="edit-field-cancel-btn-${sectionIdx}-${fieldIdx}" style="background:#777;">Cancel</button>
      <div id="edit-field-error-${sectionIdx}-${fieldIdx}" class="error-message"></div>
    </form>
  `;

  // Enter-to-save logic
  const nameInput = document.getElementById(`edit-field-name-${sectionIdx}-${fieldIdx}`);
  nameInput.addEventListener('keydown', function(e) {
    if (e.key === 'Enter') {
      e.preventDefault();
      document.getElementById(`edit-field-form-${sectionIdx}-${fieldIdx}`).requestSubmit();
    }
  });

  // Show/hide options input for dropdowns only
  const typeSelect = document.getElementById(`edit-field-type-${sectionIdx}-${fieldIdx}`);
  const optionsWrap = document.getElementById(`edit-options-wrap-${sectionIdx}-${fieldIdx}`);
  function toggleOptionsInput() {
    if (typeSelect.value === "dropdown") {
      optionsWrap.style.display = "";
    } else {
      optionsWrap.style.display = "none";
    }
  }
  typeSelect.onchange = toggleOptionsInput;
  toggleOptionsInput();

  // Toggle buttons logic
  const staticBtn = document.getElementById(`edit-static-toggle-${sectionIdx}-${fieldIdx}`);
  const requiredBtn = document.getElementById(`edit-required-toggle-${sectionIdx}-${fieldIdx}`);

  function updateToggleUI() {
    staticBtn.textContent = "Static: " + (isStatic ? "Yes" : "No");
    staticBtn.className = "toggle-btn " + (isStatic ? "toggle-yes" : "toggle-no");
    staticBtn.disabled = (sectionIdx === 0); // always static for first section

    requiredBtn.textContent = "Required: " + (isRequired ? "Yes" : "No");
    requiredBtn.className = "toggle-btn " + (isRequired ? "toggle-yes" : "toggle-no");
  }
  updateToggleUI();

  staticBtn.onclick = function() {
    if (sectionIdx === 0) return; // can't toggle static for first section
    isStatic = !isStatic;
    updateToggleUI();
  };
  requiredBtn.onclick = function() {
    isRequired = !isRequired;
    updateToggleUI();
  };

  document.getElementById(`edit-field-form-${sectionIdx}-${fieldIdx}`).onsubmit = function(e) {
    e.preventDefault();
    const name = document.getElementById(`edit-field-name-${sectionIdx}-${fieldIdx}`).value.trim();
    const type = document.getElementById(`edit-field-type-${sectionIdx}-${fieldIdx}`).value;
    const help = document.getElementById(`edit-field-help-${sectionIdx}-${fieldIdx}`).value.trim();
    const optionsRaw = document.getElementById(`edit-field-options-${sectionIdx}-${fieldIdx}`) ? document.getElementById(`edit-field-options-${sectionIdx}-${fieldIdx}`).value : "";
    let options = [];
    if (type === "dropdown") {
      options = optionsRaw.split(",").map(opt=>opt.trim()).filter(opt=>opt);
    }
    if (!name) {
      document.getElementById(`edit-field-error-${sectionIdx}-${fieldIdx}`).textContent = "Field name required.";
      return;
    }
    // Save changes
    sections[sectionIdx].fields[fieldIdx] = {
      name,
      type,
      static: sectionIdx === 0 ? true : isStatic,
      required: isRequired,
      help,
      options
    };
    wrap.innerHTML = '';
    renderFieldsList(sectionIdx);
  };
  document.getElementById(`edit-field-cancel-btn-${sectionIdx}-${fieldIdx}`).onclick = function() {
    wrap.innerHTML = '';
  };
}

// Render Fields List (vertical, with edit button)
function renderFieldsList(sectionIdx) {
  const fieldsListDiv = document.getElementById(`fields-list-${sectionIdx}`);
  fieldsListDiv.innerHTML = "";
  const fields = sections[sectionIdx].fields;
  fields.forEach((field, idx) => {
    const div = document.createElement("div");
    div.className = "field-pill";
    div.innerHTML = `
      <div>
        <span class="field-label">${field.name}</span>
        <span class="field-type-badge">${field.type}</span>
        ${field.static ? "<span class='static-badge'>Static</span>" : ""}
        ${field.required ? "<span class='required-badge'>Required</span>" : ""}
        ${field.options && field.options.length ? "<span class='options-badge'>Options</span>" : ""}
      </div>
      ${field.help ? `<div class="description">${field.help}</div>` : ""}
      ${field.options && field.options.length ? `<div class="description" style="color:#f39c12;">${field.options.join(", ")}</div>` : ""}
      <button class="edit-field-btn" data-section="${sectionIdx}" data-field="${idx}">Edit</button>
      <button class="remove-btn" data-idx="${idx}" style="align-self:flex-end; margin-top:0.2em;">Delete Field</button>
    `;
    fieldsListDiv.appendChild(div);

    div.querySelector(".edit-field-btn").onclick = function() {
      showEditFieldForm(sectionIdx, idx);
    };
    div.querySelector(".remove-btn").onclick = function() {
      fields.splice(idx, 1);
      renderFieldsList(sectionIdx);
    };
  });
}

/* ...rest of script unchanged... */
</script>
<!-- ...rest of file unchanged... -->
